<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Don Pirone - Comandas</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- App CSS -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ============ LOGIN VIEW ============ -->
<section id="view-login" class="vh-100 d-flex align-items-center justify-content-center login-bg">
  <div class="card shadow-lg" style="max-width: 420px; width: 100%;">
    <div class="card-body p-4">
      <div class="text-center mb-3">
        <!-- LOGO DO ESTABELECIMENTO (substitua o src pela sua logo) -->
        <img src="img/logo.png" alt="Don Pirone" class="img-fluid" style="max-height: 70px;">
      </div>
      <h1 class="h4 text-center mb-3">Acesso ao Sistema</h1>
      <form id="formLogin" autocomplete="on">
        <div class="mb-3">
          <label class="form-label">Login</label>
          <input type="text" class="form-control" id="loginUser" placeholder="usuário ou e-mail" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Senha</label>
          <input type="password" class="form-control" id="loginPass" placeholder="senha" required>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="rememberMe">
            <label class="form-check-label" for="rememberMe">Lembrar minha senha</label>
          </div>
          <a href="#" id="forgotLink" class="small">Esqueceu sua senha?</a>
        </div>
        <button type="submit" class="btn btn-primary w-100">
          <i class="bi bi-door-open"></i> Entrar
        </button>
      </form>
    </div>
  </div>
  <!-- Imagem de fundo: defina no CSS (.login-bg) para trocar facilmente -->
</section>

<!-- ============ DASHBOARD MESAS ============ -->
<section id="view-dashboard" class="d-none min-vh-100 d-flex flex-column">
  <!-- Nav -->
  <nav class="navbar navbar-light bg-white border-bottom px-3">
    <div class="d-flex align-items-center gap-3">
      <!-- LOGO NO NAV (substitua o src pela sua logo) -->
      <img src="img/logo.png" alt="Don Pirone" class="logo-nav">
      <span class="navbar-brand mb-0 h5">Don Pirone</span>
    </div>
    <div class="d-flex align-items-center gap-2">
      <button class="btn btn-outline-secondary btn-sm" id="btnTransferir" data-bs-toggle="modal" data-bs-target="#modalTransferir">
        <i class="bi bi-arrow-left-right"></i> Transferir conta
      </button>
      <button class="btn btn-outline-secondary btn-sm" id="btnJuntar" data-bs-toggle="modal" data-bs-target="#modalJuntar">
        <i class="bi bi-diagram-2"></i> Juntar mesas
      </button>
      <button class="btn btn-danger btn-sm" id="btnLogout"><i class="bi bi-box-arrow-right"></i> Sair</button>
    </div>
  </nav>

  <!-- Conteúdo -->
  <div class="container py-4 flex-fill">
    <h2 class="h5 mb-3">Mesas</h2>
    <div id="gridMesas" class="row g-3">
      <!-- Botões das 10 mesas gerados via JS -->
    </div>
  </div>
</section>

<!-- ============ TELA DA MESA ============ -->
<section id="view-mesa" class="d-none min-vh-100 d-flex flex-column">
  <!-- Nav -->
  <nav class="navbar navbar-light bg-white border-bottom px-3">
    <div class="d-flex align-items-center gap-3">
      <img src="img/logo.png" alt="Don Pirone" class="logo-nav">
      <span class="navbar-brand mb-0 h5">Don Pirone</span>
    </div>
    <div class="d-flex align-items-center gap-2">
      <button class="btn btn-outline-secondary btn-sm" id="btnVoltarMesas"><i class="bi bi-arrow-left"></i> Voltar para mesas</button>
      <button class="btn btn-danger btn-sm" id="btnLogout2"><i class="bi bi-box-arrow-right"></i> Sair</button>
    </div>
  </nav>

  <!-- Conteúdo -->
  <div class="container-fluid flex-fill">
    <div class="row">
      <!-- Sidebar (desktop) -->
      <aside class="col-lg-2 d-none d-lg-block border-end py-3">
        <div class="d-flex align-items-center justify-content-between mb-2">
          <strong>Mesas</strong>
        </div>
        <div id="sidebarMesas" class="d-grid gap-2">
          <!-- Lista de mesas via JS -->
        </div>
      </aside>

      <!-- Conteúdo principal -->
      <main class="col-lg-7 py-3">
        <div class="d-flex align-items-center justify-content-between mb-3">
          <h2 class="h5 mb-0">Mesa <span id="mesaAtualLabel"></span></h2>

          <!-- Botão flutuante/Offcanvas (mobile) -->
          <button class="btn btn-outline-primary d-lg-none" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMesas">
            <i class="bi bi-list"></i> Mesas
          </button>
        </div>

        <!-- Categorias -->
        <div id="catButtons" class="d-flex flex-wrap gap-2 mb-3">
          <!-- Botões de categorias via JS -->
        </div>

        <!-- Lista de produtos -->
        <div id="produtosGrid" class="row g-3">
          <!-- Cards de produtos via JS -->
        </div>

      </main>

      <!-- Resumo da comanda -->
      <aside class="col-lg-3 border-start py-3">
        <h3 class="h6">Resumo da Comanda</h3>
        <div id="listaComanda" class="vstack gap-2 mb-3">
          <!-- Itens adicionados -->
        </div>

        <div class="small text-muted mb-2">
          <i class="bi bi-info-circle"></i> Toque em <strong>−/+</strong> para ajustar quantidades ou use a lixeira para remover.
        </div>

        <div class="card mb-3">
          <div class="card-body">
            <h4 class="h6 mb-3">Acréscimos / Descontos</h4>
            <div class="row g-2">
              <div class="col-6">
                <label class="form-label small mb-1">Acréscimo (R$)</label>
                <input type="number" class="form-control form-control-sm" id="inExtraValor" step="0.01" placeholder="0,00">
              </div>
              <div class="col-6">
                <label class="form-label small mb-1">Acréscimo (%)</label>
                <input type="number" class="form-control form-control-sm" id="inExtraPerc" step="0.01" placeholder="0">
              </div>
              <div class="col-6">
                <label class="form-label small mb-1">Desconto (R$)</label>
                <input type="number" class="form-control form-control-sm" id="inDescValor" step="0.01" placeholder="0,00">
              </div>
              <div class="col-6">
                <label class="form-label small mb-1">Desconto (%)</label>
                <input type="number" class="form-control form-control-sm" id="inDescPerc" step="0.01" placeholder="0">
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <span>Subtotal</span>
              <strong id="lblSubtotal">R$ 0,00</strong>
            </div>
            <div class="d-flex justify-content-between">
              <span>Acrés./Desc.</span>
              <strong id="lblAjustes">R$ 0,00</strong>
            </div>
            <hr class="my-2">
            <div class="d-flex justify-content-between fs-5">
              <span>Total</span>
              <strong id="lblTotal">R$ 0,00</strong>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <label class="form-label small">Dividir conta por</label>
            <div class="input-group mb-2">
              <input type="number" id="inPessoas" class="form-control form-control-sm" min="1" value="1">
              <span class="input-group-text">pessoas</span>
            </div>
            <div class="d-flex justify-content-between">
              <span>Cada um paga</span>
              <strong id="lblPorPessoa">R$ 0,00</strong>
            </div>
          </div>
        </div>

        <div class="d-grid gap-2 mt-3">
          <button class="btn btn-outline-secondary" id="btnLimparComanda"><i class="bi bi-eraser"></i> Limpar comanda</button>
          <button class="btn btn-success" id="btnFecharComanda"><i class="bi bi-cash-coin"></i> Fechar comanda</button>
        </div>

      </aside>
    </div>
  </div>
</section>

<!-- ============ OFFCANVAS (mesas no mobile) ============ -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMesas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Mesas</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <div id="offcanvasMesasList" class="d-grid gap-2">
      <!-- Mesas via JS -->
    </div>
  </div>
</div>

<!-- ============ MODAL TRANSFERIR ============ -->
<div class="modal fade" id="modalTransferir" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="formTransferir">
      <div class="modal-header">
        <h5 class="modal-title"><i class="bi bi-arrow-left-right"></i> Transferir conta</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row g-2">
          <div class="col-6">
            <label class="form-label">Da mesa</label>
            <select class="form-select" id="transferFrom"></select>
          </div>
          <div class="col-6">
            <label class="form-label">Para a mesa</label>
            <select class="form-select" id="transferTo"></select>
          </div>
        </div>
        <div class="form-text mt-2">Move todos os itens e ajustes para a mesa destino.</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-primary" type="submit">Transferir</button>
      </div>
    </form>
  </div>
</div>

<!-- ============ MODAL JUNTAR MESAS ============ -->
<div class="modal fade" id="modalJuntar" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="formJuntar">
      <div class="modal-header">
        <h5 class="modal-title"><i class="bi bi-diagram-2"></i> Juntar mesas</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <label class="form-label">Mesa principal (receberá as outras)</label>
        <select class="form-select mb-3" id="mergeTarget"></select>
        <label class="form-label">Mesas a somar</label>
        <div id="mergeSources" class="vstack gap-1">
          <!-- Checkboxes via JS -->
        </div>
        <div class="form-text mt-2">Soma itens e ajustes das mesas marcadas na mesa principal e limpa as demais.</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-primary" type="submit">Juntar</button>
      </div>
    </form>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- App JS -->
<script src="js/script.js"></script>
</body>
</html>